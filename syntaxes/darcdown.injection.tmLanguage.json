{
  "scopeName": "darcdown.injection",
  "injectionSelector": "L:text.html.markdown -comment",
  "patterns": [
    { "include": "#bracketCommands" },
    { "include": "#blockTags" }
  ],
  "repository": {
    "bracketCommands": {
      "patterns": [
        {
          "name": "meta.darcdown.command",
          "begin": "\\[",
          "beginCaptures": { "0": { "name": "punctuation.definition.bracket.begin.darcdown" } },
          "end": "\\]",
          "endCaptures": { "0": { "name": "punctuation.definition.bracket.end.darcdown" } },
          "patterns": [
            {
              "name": "entity.name.function.darcdown",
              "match": "^(question|picture|photo|ref|table|morse|qso_own|qso_other)(?=:)"
            },
            { "name": "punctuation.separator.keyvalue.darcdown", "match": ":" },
            { "name": "constant.numeric.darcdown", "match": "(?<=:)\\d+(?=(:|\\]))" },
            { "name": "variable.other.darcdown", "match": "(?<=:)n_[a-zA-Z0-9_\\-]+(?=(:|\\]))" },
            { "name": "string.unquoted.darcdown", "match": "(?<=:)[^\\]]+(?=\\])" }
          ]
        }
      ]
    },
    "blockTags": {
      "patterns": [
        {
          "name": "meta.darcdown.block",
          "begin": "<(margin|attention|indepth|tip|webmargin|webtip|webindepth|webonly|latexonly)>",
          "beginCaptures": {
            "0": { "name": "entity.name.tag.darcdown" },
            "1": { "name": "entity.name.tag.darcdown" }
          },
          "end": "</\\1>",
          "endCaptures": {
            "0": { "name": "entity.name.tag.darcdown" }
          }
        }
      ]
    }
  }
}
